<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Selo MIV | Oficial</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #07090c; color: white; font-family: sans-serif; }
        .card-miv { background: #111418; border: 1px solid #1e2329; border-radius: 15px; padding: 25px; margin: auto; max-width: 400px; }
        .miv-input { background: #1c2127; border: 1px solid #2d333b; color: white; margin-bottom: 10px; }
        .btn-miv { background: #00c6ff; color: black; font-weight: bold; width: 100%; border: none; padding: 12px; border-radius: 10px; }
    </style>
</head>
<body class="p-4">

    <div id="areaLogin" class="card-miv" style="margin-top: 50px;">
        <h4 class="text-center mb-4">MIV <span style="color:#00c6ff">LOGIN</span></h4>
        <input type="email" id="lUser" class="form-control miv-input" placeholder="E-mail">
        <input type="password" id="lPass" class="form-control miv-input" placeholder="Senha">
        <button onclick="fazerLogin()" class="btn btn-miv">ENTRAR NO ECOSSISTEMA</button>
        <p class="text-center mt-3 small">Não tem conta? <a href="#" onclick="trocar(true)" class="text-info">Cadastre-se</a></p>
    </div>

    <div id="areaCadastro" class="card-miv" style="display:none; margin-top: 50px;">
        <h4 class="text-center mb-4 text-info">NOVO CADASTRO</h4>
        <input type="text" id="cNome" class="form-control miv-input" placeholder="Nome Completo">
        <input type="email" id="cEmail" class="form-control miv-input" placeholder="Melhor E-mail">
        <input type="password" id="cPass" class="form-control miv-input" placeholder="Crie uma Senha">
        <select id="cTipo" class="form-control miv-input">
            <option value="ouvinte">Investidor / Ouvinte</option>
            <option value="artista">Artista / Produtor</option>
        </select>
        <button onclick="fazerCadastro()" class="btn btn-miv">CRIAR CONTA E CONFIRMAR E-MAIL</button>
        <p class="text-center mt-3 small"><a href="#" onclick="trocar(false)" class="text-muted">Voltar ao Login</a></p>
    </div>

    <div id="areaDash" style="display:none;" class="container mt-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h4>Olá, <span id="uNome"></span></h4>
            <button class="btn btn-sm btn-outline-danger" onclick="location.reload()">Sair</button>
        </div>
        <div class="card-miv">
            <small class="text-muted">Playlist Oficial Ativa</small>
            <button class="btn btn-info w-100 mt-2" onclick="window.open('https://www.youtube.com/watch?v=sNRWCkk1o9w&list=PLvteL0_9cu8oE_N4Qfz5JJucTTkY2czcN')">
                ABRIR PLAYER MIV
            </button>
        </div>
    </div>

    <script>
        const API_URL = "SUA_URL_DO_DEPLOY_GOOGLE";

        async function fazerLogin() {
            const u = document.getElementById("lUser").value;
            const s = document.getElementById("lPass").value;
            const res = await fetch(`${API_URL}?acao=login&usuario=${u}&senha=${s}`);
            const data = await res.json();
            if(data.success) {
                document.getElementById("areaLogin").style.display = "none";
                document.getElementById("areaDash").style.display = "block";
                document.getElementById("uNome").innerText = data.nome;
            } else { alert(data.msg || "Erro no login!"); }
        }

        async function fazerCadastro() {
            const n = document.getElementById("cNome").value;
            const e = document.getElementById("cEmail").value;
            const s = document.getElementById("cPass").value;
            const t = document.getElementById("cTipo").value;
            
            alert("Enviando... Verifique seu e-mail após esta mensagem.");
            
            const res = await fetch(`${API_URL}?acao=cadastro&nome=${n}&email=${e}&senha=${s}&tipo=${t}&url_confirmacao=${window.location.href.split('?')[0]}`);
            const data = await res.json();
            
            if(data.success) {
                alert("Cadastro realizado! Acesse seu e-mail para ativar a conta.");
                trocar(false);
            }
        }

        function trocar(cad) {
            document.getElementById("areaLogin").style.display = cad ? "none" : "block";
            document.getElementById("areaCadastro").style.display = cad ? "block" : "none";
        }
    </script>
</body>
</html>
