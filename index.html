<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="SELO MIV - Plataforma de Investimento em MÃºsica">
<meta name="theme-color" content="#00ff88">
<title>SELO MIV | Fintech Musical</title>

<!-- Bootstrap 5.3.0 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&display=swap" rel="stylesheet">

<style>
:root {
  --neon-green: #00ff88;
  --miv-blue: #0072ff;
  --bg-dark: #07090c;
  --bg-card: #111418;
  --border: #1e2329;
  --text-light: #f8f9fa;
  --text-muted: #6c757d;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Outfit', sans-serif; background: var(--bg-dark); color: var(--text-light); min-height: 100vh; overflow-x: hidden; }

/* Loading Screen */
.loading-screen { position: fixed; inset: 0; background: var(--bg-dark); display: flex; justify-content: center; align-items: center; z-index: 9999; transition: opacity 0.3s; }
.loading-spinner { width: 4rem; height: 4rem; border: 0.25rem solid rgba(0,255,136,0.3); border-top-color: var(--neon-green); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Auth Screen */
.auth-screen { position: fixed; inset: 0; background: linear-gradient(135deg, var(--bg-dark), #0c0e12); display: flex; align-items: center; justify-content: center; padding: 1rem; z-index: 9998; overflow-y: auto; }
.auth-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 1.5rem; padding: 2.5rem; max-width: 420px; width: 100%; box-shadow: 0 20px 40px rgba(0,0,0,0.4); text-align: center; transition: transform 0.3s; }
.auth-card:hover { transform: translateY(-5px); }
.logo-icon { display: inline-flex; justify-content: center; align-items: center; width: 80px; height: 80px; margin-bottom: 1rem; border-radius: 50%; border: 2px solid var(--neon-green); background: rgba(0,255,136,0.1); }
.logo-icon i { font-size: 2.5rem; color: var(--neon-green); }
.form-control-custom { background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 0.75rem; color: var(--text-light); padding: 0.875rem 1rem; margin-bottom: 1rem; width: 100%; }
.form-control-custom:focus { border-color: var(--neon-green); outline: none; box-shadow: 0 0 0 0.25rem rgba(0,255,136,0.25); }
.btn-miv { background: linear-gradient(135deg, var(--neon-green), #00cc6a); border-radius: 0.75rem; border: none; font-weight: 700; color: #000; padding: 1rem; width: 100%; margin-bottom: 1rem; cursor: pointer; transition: all 0.3s; display: flex; justify-content: center; align-items: center; gap: 0.5rem; }
.btn-miv:hover { box-shadow: 0 10px 20px rgba(0,255,136,0.3); transform: translateY(-2px); }

/* Main App */
.main-app { display: none; min-height: 100vh; padding-bottom: 5rem; }
.app-header { position: sticky; top: 0; z-index: 1000; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); background: linear-gradient(180deg, rgba(0,255,136,0.1), rgba(7,9,12,0.8)); backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center; }
.saldo-display h6 { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; }
.saldo-display h4 { color: var(--neon-green); font-weight: 700; margin: 0; }
.user-badge { background: var(--neon-green); color: #000; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.75rem; font-weight: 700; }

/* Sidebar */
.sidebar { position: fixed; top: 0; left: -300px; width: 300px; height: 100vh; background: #000; border-right: 1px solid var(--border); padding: 1.5rem; transition: left 0.3s; z-index: 1100; overflow-y: auto; }
.sidebar.open { left: 0; }
.nav-menu { list-style: none; padding: 0; }
.nav-link { display: flex; align-items: center; gap: 0.75rem; padding: 0.875rem 1rem; color: var(--text-muted); text-decoration: none; border-radius: 0.75rem; transition: all 0.3s; }
.nav-link.active, .nav-link:hover { color: var(--neon-green); background: rgba(0,255,136,0.1); }

/* Sections */
.section { display: none; padding: 1.5rem; animation: fadeIn 0.3s; }
.section.active { display: block; }
@keyframes fadeIn { from { opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
.section-title { font-weight: 700; color: var(--text-light); margin-bottom: 1rem; }
.music-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:1rem; }
.music-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 1rem; cursor: pointer; overflow: hidden; transition: transform 0.2s ease, box-shadow 0.2s ease; }
.music-card:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(0,255,136,0.3); border-color: var(--neon-green); }
.music-cover { width: 100%; height: 180px; object-fit: cover; }
.music-info { padding: 1rem; }
.music-title { font-weight: 600; margin-bottom: 0.25rem; }
.music-artist { font-size: 0.875rem; color: var(--text-muted); margin-bottom:0.75rem; }
.music-price { font-weight: 700; color: var(--neon-green); }
.music-percent { background: rgba(0,123,255,0.1); color: #007bff; padding:0.25rem 0.75rem; border-radius:1rem; font-size:0.75rem; font-weight:600; position: relative; }
.music-percent::after { content: attr(data-tooltip); position: absolute; bottom:125%; left:50%; transform:translateX(-50%); background: var(--bg-dark); color: var(--text-light); padding:0.25rem 0.5rem; border-radius:0.5rem; white-space:nowrap; opacity:0; transition: opacity 0.3s; pointer-events:none; }
.music-percent:hover::after { opacity:1; }

/* Player */
.player-bar { position: fixed; bottom: 5rem; left:0; right:0; background: var(--bg-card); border-top: 1px solid var(--border); padding:1rem; z-index:1000; display:none; transition: all 0.3s; }
.player-bar.expanded { bottom:0; height:100vh; backdrop-filter:blur(15px); background: rgba(7,9,12,0.95); }
.player-info { display:flex; align-items:center; gap:1rem; cursor:pointer; }
.player-album-art { width:60px; height:60px; border-radius:0.75rem; object-fit:cover; }
.player-text { flex:1; }
.player-title { font-weight:600; margin-bottom:0.25rem; }
.player-artist { font-size:0.875rem; color: var(--text-muted); }
.player-price { color: var(--neon-green); font-weight:700; }
.progress-container { height:6px; background: rgba(255,255,255,0.1); border-radius:3px; margin:1rem 0; cursor:pointer; }
.progress-bar { height:100%; border-radius:3px; width:0%; transition:width 0.3s; background: linear-gradient(to right, var(--neon-green), #00cc6a); }
.player-controls { display:flex; justify-content:center; gap:2rem; margin-top:1rem; }
.control-btn { background:none; border:none; color: var(--text-light); font-size:1.5rem; cursor:pointer; transition: all 0.3s; }
.control-btn:hover { color: var(--neon-green); transform: scale(1.1); }
.play-btn { font-size:2.5rem; }

/* Bottom Nav */
.bottom-nav { position:fixed; bottom:0; left:0; right:0; display:flex; justify-content:space-around; padding:0.75rem 0; background:#000; border-top:1px solid var(--border); z-index:1001; }
.nav-btn { background:none; border:none; color: var(--text-muted); display:flex; flex-direction:column; align-items:center; gap:0.25rem; cursor:pointer; transition: color 0.3s; flex:1; }
.nav-btn.active, .nav-btn:hover { color: var(--neon-green); }
.nav-btn i { font-size:1.25rem; }
.nav-btn span { font-size:0.75rem; }

/* Toasts */
.toast-container { position: fixed; top:1rem; right:1rem; z-index:1300; max-width:350px; }
.toast { background: var(--bg-card); border:1px solid var(--border); border-radius:0.75rem; padding:1rem; margin-bottom:0.5rem; display:flex; align-items:center; gap:0.75rem; transform: translateX(100%); opacity:0; transition: all 0.3s ease; }
.toast.show { transform: translateX(0); opacity:1; }
.toast.success { border-color: var(--neon-green); background: rgba(0,255,136,0.1); }
.toast.error { border-color:#ff3232; background: rgba(255,50,50,0.1); }
.toast-icon { font-size:1.25rem; }
.toast-message { flex:1; color: var(--text-light); }

@media (max-width:768px) { .music-grid { grid-template-columns:1fr; } }
</style>
</head>
<body>

<!-- Loading -->
<div id="loadingScreen" class="loading-screen">
  <div class="loading-content">
    <div class="loading-spinner"></div>
    <h4 class="text-success mb-2">Conectando ao SELO MIV</h4>
    <p class="text-muted" id="loadingMessage">Autenticando...</p>
  </div>
</div>

<!-- Toast -->
<div class="toast-container" id="toastContainer"></div>

<!-- Auth -->
<div id="authScreen" class="auth-screen">
  <div class="auth-card">
    <div class="logo-icon"><i class="bi bi-shield-lock"></i></div>
    <h2 class="mb-2">SELO MIV</h2>
    <p class="text-muted mb-4">Plataforma de Investimento em MÃºsica</p>

    <div id="loginForm">
      <div id="loginMessage" class="alert d-none"></div>
      <input type="email" id="loginEmail" class="form-control-custom" placeholder="E-mail" required>
      <input type="password" id="loginPassword" class="form-control-custom" placeholder="Senha" required>
      <button class="btn-miv" onclick="handleLogin()"><i class="bi bi-box-arrow-in-right"></i> Entrar</button>
      <p class="text-muted mt-2">Novo? <a href="javascript:void(0)" class="auth-link" onclick="showRegisterForm()">Criar conta</a></p>
    </div>

    <div id="registerForm" style="display:none;">
      <div id="registerMessage" class="alert d-none"></div>
      <input type="text" id="registerName" class="form-control-custom" placeholder="Nome completo">
      <input type="email" id="registerEmail" class="form-control-custom" placeholder="E-mail">
      <input type="password" id="registerPassword" class="form-control-custom" placeholder="Senha" minlength="6">
      <select id="registerType" class="form-control-custom" onchange="toggleArtistField()">
        <option value="">Perfil</option>
        <option value="ouvinte">ðŸŽ§ Ouvinte/Investidor</option>
        <option value="artista">ðŸŽ¤ Artista</option>
      </select>
      <div id="artistLinkField" style="display:none;">
        <input type="url" id="registerLink" class="form-control-custom" placeholder="Link do seu trabalho">
      </div>
      <button class="btn-miv" onclick="handleRegister()"><i class="bi bi-person-plus"></i> Solicitar Cadastro</button>
      <p class="text-muted mt-2">JÃ¡ tem conta? <a href="javascript:void(0)" class="auth-link" onclick="showLoginForm()">Fazer login</a></p>
    </div>
  </div>
</div>

<!-- Main App -->
<div id="mainApp" class="main-app">
  <!-- Header, Sidebar, Sections, Player e Bottom Nav aqui, mantidos como antes -->
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="app.js"></script>
</body>
</html>
