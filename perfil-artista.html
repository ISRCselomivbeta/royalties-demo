<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Perfil Artista | SELO MIV</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body { background: #0b0e11; color: white; }
        .profile-header { background: linear-gradient(to bottom, #0072ff, #0b0e11); padding: 60px 20px; text-align: center; }
        .btn-follow { border-radius: 20px; padding: 10px 30px; font-weight: bold; }
        .card-musica { background: #1e2329; border: none; border-radius: 12px; transition: 0.3s; }
        .card-musica:hover { background: #2b3139; }
    </style>
</head>
<body>

    <div class="profile-header">
        <h1 id="nomeArtista">Carregando...</h1>
        <p id="bioArtista" class="text-light">Biografia do artista...</p>
        <button onclick="seguir()" id="btnSeguir" class="btn btn-primary btn-follow">SEGUIR</button>
        <button onclick="compartilhar()" class="btn btn-outline-light btn-follow"><i class="bi bi-share"></i> COMPARTILHAR</button>
    </div>

    <div class="container py-5">
        <h4>Ações Musicais (Investimento)</h4>
        <div id="listaAcoes" class="row mt-4">
            </div>
    </div>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbybg-Ca4Kaxszk0KO2wNHUu3ZJkV4hepCm94plbWnvFSzg0ye-c09F61S7QddvRqGBz/exec";
        
        // Simulação de carregamento (No futuro busca por ID na URL)
        document.getElementById("nomeArtista").innerText = "Elzo MIV";

        async function seguir() {
            const res = await fetch(API_URL, {
                method: 'POST',
                body: new URLSearchParams({
                    acao: 'seguir_artista',
                    ouvinte_id: localStorage.getItem("userId"),
                    artista_id: "ART001" // Exemplo
                })
            });
            document.getElementById("btnSeguir").innerText = "SEGUINDO";
            alert("Agora você segue este artista!");
        }

        function compartilhar() {
            if (navigator.share) {
                navigator.share({
                    title: 'Perfil Artista - Selo MIV',
                    text: 'Confira as ações musicais deste artista no Selo MIV!',
                    url: window.location.href
                });
            }
        }

        // Simulação de Marketplace
        const acoes = [
            { id: "M01", nome: "Som da Rua", preco: 15.00, disponivel: 49 },
        ];

        function renderAcoes() {
            const div = document.getElementById("listaAcoes");
            acoes.forEach(a => {
                div.innerHTML += `
                <div class="col-md-4">
                    <div class="card card-musica p-3 text-center">
                        <h5>${a.nome}</h5>
                        <p class="text-success fw-bold">R$ ${a.preco.toFixed(2)} / ação</p>
                        <small class="text-muted">${a.disponivel}% disponível para compra</small>
                        <button class="btn btn-sm btn-light mt-3" onclick="abrirCompra('${a.id}')">COMPRAR AÇÕES</button>
                    </div>
                </div>`;
            });
        }
        renderAcoes();

        function abrirCompra(id) {
            const qtd = prompt("Quantas ações deseja comprar?");
            if(qtd) window.location.href = `checkout.html?id=${id}&qtd=${qtd}`;
        }
    </script>
</body>
</html>
